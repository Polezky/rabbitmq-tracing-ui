var ct=Object.defineProperty;var ut=(l,e,t)=>e in l?ct(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var J=(l,e,t)=>(ut(l,typeof e!="symbol"?e+"":e,t),t);import{S as te,i as le,s as se,e as he,b as S,H as Y,h,k as y,a as A,l as v,m as I,c as O,n as C,G as d,J as ie,K as de,q as R,r as z,u as X,L as ft,M as me,N as fe,O as H,P as oe,Q as ve,R as x,T as lt,o as Ee,U as ke,V as st,W as Q,g as L,v as _e,d as G,f as pe,X as ht,y as re,z as ae,A as ce,B as ue}from"../chunks/index.9614888c.js";import{w as dt}from"../chunks/index.66e03b77.js";var K=(l=>(l[l.Text=0]="Text",l[l.TextArray=1]="TextArray",l[l.Number=2]="Number",l[l.DateTime=3]="DateTime",l))(K||{});const Z=[Object.freeze({type:K.DateTime,displayName:"Date & Time",logItemKey:"timestamp",getDisplayValue:l=>mt(l.timestamp)}),Object.freeze({type:K.Number,displayName:"Channel",logItemKey:"channel"}),Object.freeze({type:K.Text,displayName:"Connection",logItemKey:"connection"}),Object.freeze({type:K.Text,displayName:"Exchange",logItemKey:"exchange"}),Object.freeze({type:K.Text,displayName:"Node",logItemKey:"node"}),Object.freeze({type:K.Text,displayName:"Payload",logItemKey:"payload",getDisplayValue:l=>_t(l.payload)}),Object.freeze({type:K.Text,displayName:"Queue",logItemKey:"queue"}),Object.freeze({type:K.TextArray,displayName:"Routed Queues",logItemKey:"routed_queues"}),Object.freeze({type:K.TextArray,displayName:"Routing Keys",logItemKey:"routing_keys"}),Object.freeze({type:K.Text,displayName:"Type",logItemKey:"type"}),Object.freeze({type:K.Text,displayName:"User",logItemKey:"user"}),Object.freeze({type:K.Text,displayName:"Vhost",logItemKey:"vhost"}),Object.freeze({type:K.Number,displayName:"Delivery Mode",logItemKey:"delivery_mode"})];function mt(l){const e=l.toLocaleDateString(),t=l.toLocaleTimeString();return`${e} ${t}`}function _t(l){return`<pre class="ellipsis">${l}</pre>`}const nt="logItemColumnList",ee=dt({isEditMode:!1,columns:[]});let ye;class ge{constructor(e){this.columns=e,ee.update(t=>({...t,columns:this.columns}))}toggleColumnVisibility(e){e.isVisible=!e.isVisible;const t=this.columns.some(s=>s.isVisible)?void 0:!1;this.saveColumnsAndUpdateStore(t)}moveColumnLeft(e){this.moveColumn(e,!1)}moveColumnRight(e){this.moveColumn(e,!0)}canMoveColumnLeft(e){const t=this.getVisibleColumns();return e.index>Math.min(...t.map(s=>s.index))}canMoveColumnRight(e){const t=this.getVisibleColumns();return e.index<Math.max(...t.map(s=>s.index))}getVisibleColumns(){return this.columns.filter(e=>e.isVisible)}moveColumn(e,t){if(t&&!this.canMoveColumnRight(e)||!t&&!this.canMoveColumnLeft(e))return;const s=this.getVisibleColumns(),n=e.index,i=t?s.find(o=>o.index>n):s.reverse().find(o=>o.index<n);e.index=i.index,i.index=n,this.columns=it(this.columns),this.saveColumnsAndUpdateStore()}saveColumnsAndUpdateStore(e){this.save(),ee.update(t=>({columns:this.columns,isEditMode:e===void 0?t.isEditMode:e}))}save(){const e=JSON.stringify(this.columns);localStorage.setItem(nt,e)}static get instance(){if(!ye){const e=pt();ye=new ge(e)}return ye}}function pt(){let l;const e=typeof localStorage<"u"?localStorage.getItem(nt):void 0;return e?l=JSON.parse(e):l=Z.map(({displayName:t,logItemKey:s},n)=>({displayName:t,logItemKey:s,isVisible:!0,index:n})),it(l)}function it(l){return l.sort((e,t)=>e.index-t.index)}const{Map:ot}=ft;function Ne(l,e,t){const s=l.slice();return s[8]=e[t],s[10]=t,s}function Ce(l,e,t){const s=l.slice();return s[11]=e[t],s}function Ve(l,e,t){const s=l.slice();return s[11]=e[t],s}function De(l){let e,t,s,n=[],i=new ot,o,r,a=l[1];const g=c=>c[11].index;for(let c=0;c<a.length;c+=1){let _=Ve(l,a,c),u=g(_);i.set(u,n[c]=Me(u,_))}let E=l[0],f=[];for(let c=0;c<E.length;c+=1)f[c]=Ae(Ne(l,E,c));return{c(){e=y("table"),t=y("thead"),s=y("tr");for(let c=0;c<n.length;c+=1)n[c].c();o=A(),r=y("tbody");for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){e=v(c,"TABLE",{class:!0});var _=I(e);t=v(_,"THEAD",{});var u=I(t);s=v(u,"TR",{});var V=I(s);for(let p=0;p<n.length;p+=1)n[p].l(V);V.forEach(h),u.forEach(h),o=O(_),r=v(_,"TBODY",{});var N=I(r);for(let p=0;p<f.length;p+=1)f[p].l(N);N.forEach(h),_.forEach(h),this.h()},h(){C(e,"class","list svelte-1uj74mp")},m(c,_){S(c,e,_),d(e,t),d(t,s);for(let u=0;u<n.length;u+=1)n[u].m(s,null);d(e,o),d(e,r);for(let u=0;u<f.length;u+=1)f[u].m(r,null)},p(c,_){if(_&14&&(a=c[1],n=ie(n,_,g,1,c,a,i,s,me,Me,null,Ve)),_&19){E=c[0];let u;for(u=0;u<E.length;u+=1){const V=Ne(c,E,u);f[u]?f[u].p(V,_):(f[u]=Ae(V),f[u].c(),f[u].m(r,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=E.length}},d(c){c&&h(e);for(let _=0;_<n.length;_+=1)n[_].d();de(f,c)}}}function we(l){let e,t,s,n,i,o,r,a;function g(){return l[5](l[11])}function E(){return l[6](l[11])}return{c(){e=y("div"),t=y("div"),s=R("←"),n=A(),i=y("div"),o=R("→"),this.h()},l(f){e=v(f,"DIV",{class:!0});var c=I(e);t=v(c,"DIV",{class:!0});var _=I(t);s=z(_,"←"),_.forEach(h),n=O(c),i=v(c,"DIV",{class:!0});var u=I(i);o=z(u,"→"),u.forEach(h),c.forEach(h),this.h()},h(){C(t,"class","move-arrow svelte-1uj74mp"),fe(t,"disabled",!l[3].canMoveColumnLeft(l[11])),C(i,"class","move-arrow svelte-1uj74mp"),fe(i,"disabled",!l[3].canMoveColumnRight(l[11])),C(e,"class","config-container svelte-1uj74mp")},m(f,c){S(f,e,c),d(e,t),d(t,s),d(e,n),d(e,i),d(i,o),r||(a=[H(t,"click",g),H(i,"click",E)],r=!0)},p(f,c){l=f,c&10&&fe(t,"disabled",!l[3].canMoveColumnLeft(l[11])),c&10&&fe(i,"disabled",!l[3].canMoveColumnRight(l[11]))},d(f){f&&h(e),r=!1,oe(a)}}}function Me(l,e){let t,s,n,i=e[11].displayName+"",o,r,a=e[2]&&we(e);return{key:l,first:null,c(){t=y("th"),a&&a.c(),s=A(),n=y("strong"),o=R(i),r=A(),this.h()},l(g){t=v(g,"TH",{class:!0});var E=I(t);a&&a.l(E),s=O(E),n=v(E,"STRONG",{});var f=I(n);o=z(f,i),f.forEach(h),r=O(E),E.forEach(h),this.h()},h(){C(t,"class","c svelte-1uj74mp"),this.first=t},m(g,E){S(g,t,E),a&&a.m(t,null),d(t,s),d(t,n),d(n,o),d(t,r)},p(g,E){e=g,e[2]?a?a.p(e,E):(a=we(e),a.c(),a.m(t,s)):a&&(a.d(1),a=null),E&2&&i!==(i=e[11].displayName+"")&&X(o,i)},d(g){g&&h(t),a&&a.d()}}}function Se(l,e){let t,s=e[4](e[8],e[11])+"";return{key:l,first:null,c(){t=y("td"),this.h()},l(n){t=v(n,"TD",{});var i=I(t);i.forEach(h),this.h()},h(){this.first=t},m(n,i){S(n,t,i),t.innerHTML=s},p(n,i){e=n,i&3&&s!==(s=e[4](e[8],e[11])+"")&&(t.innerHTML=s)},d(n){n&&h(t)}}}function Ae(l){let e,t=[],s=new ot,n,i=l[1];const o=r=>r[11].index;for(let r=0;r<i.length;r+=1){let a=Ce(l,i,r),g=o(a);s.set(g,t[r]=Se(g,a))}return{c(){e=y("tr");for(let r=0;r<t.length;r+=1)t[r].c();n=A(),this.h()},l(r){e=v(r,"TR",{class:!0});var a=I(e);for(let g=0;g<t.length;g+=1)t[g].l(a);n=O(a),a.forEach(h),this.h()},h(){C(e,"class",l[10]%2===0?"alt2":"alt1")},m(r,a){S(r,e,a);for(let g=0;g<t.length;g+=1)t[g].m(e,null);d(e,n)},p(r,a){a&19&&(i=r[1],t=ie(t,a,o,1,r,i,s,e,me,Se,n,Ce))},d(r){r&&h(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function gt(l){let e,t=l[0].length&&De(l);return{c(){t&&t.c(),e=he()},l(s){t&&t.l(s),e=he()},m(s,n){t&&t.m(s,n),S(s,e,n)},p(s,[n]){s[0].length?t?t.p(s,n):(t=De(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Y,o:Y,d(s){t&&t.d(s),s&&h(e)}}}function bt(l,e,t){let{logItems:s=[]}=e;const n=ge.instance,i=new Map(Z.filter(f=>typeof f.getDisplayValue=="function").map(f=>[f.logItemKey,f.getDisplayValue]));let o,r=!1;ee.subscribe(({isEditMode:f})=>{t(1,o=n.getVisibleColumns()),t(2,r=f)});function a(f,c){return i.has(c.logItemKey)?i.get(c.logItemKey)(f):`${f[c.logItemKey]}`}const g=f=>n.moveColumnLeft(f),E=f=>n.moveColumnRight(f);return l.$$set=f=>{"logItems"in f&&t(0,s=f.logItems)},[s,o,r,n,a,g,E]}class yt extends te{constructor(e){super(),le(this,e,bt,gt,se,{logItems:0})}}class Ie{constructor(e){J(this,"channel");J(this,"connection");J(this,"exchange");J(this,"node");J(this,"payload");J(this,"properties");J(this,"queue");J(this,"routed_queues");J(this,"routing_keys");J(this,"timestamp");J(this,"type");J(this,"user");J(this,"vhost");J(this,"delivery_mode");Object.assign(this,e)}static fromJson(e){const t=new Ie(JSON.parse(e));return t.timestamp=new Date(t.timestamp),t.delivery_mode=t.properties.delivery_mode,t.payload=kt(vt(t.payload)),t}}function vt(l){const e=window.atob(l).split("").map(n=>n.charCodeAt(0)),t=Uint8Array.from(e);return new TextDecoder().decode(t)}function kt(l){try{const e=JSON.parse(l);return JSON.stringify(e,null,2)}catch{return l}}var P=(l=>(l[l.IsEqual=0]="IsEqual",l[l.IsNotEqual=1]="IsNotEqual",l[l.Includes=2]="Includes",l[l.DoesNotInclude=3]="DoesNotInclude",l[l.StartsWith=4]="StartsWith",l[l.EndsWith=5]="EndsWith",l[l.Greater=6]="Greater",l[l.GreaterOrEqual=7]="GreaterOrEqual",l[l.Less=8]="Less",l[l.LessOrEqual=9]="LessOrEqual",l[l.After=10]="After",l[l.Before=11]="Before",l))(P||{});const Oe=new Map([[0,"is equal"],[1,"is not equal"],[2,"includes"],[3,"doesn't include"],[4,"starts with"],[5,"ends with"],[6,"is greater"],[7,"is greater or equal"],[8,"is less"],[9,"is less or equal"],[10,"is after"],[11,"is before"]]),Et=new Map([[P.IsEqual,(l,e)=>l===e],[P.IsNotEqual,(l,e)=>l!==e],[P.StartsWith,(l,e)=>l==null?void 0:l.startsWith(e)],[P.EndsWith,(l,e)=>l==null?void 0:l.endsWith(e)],[P.Includes,(l,e)=>l==null?void 0:l.includes(e)],[P.DoesNotInclude,(l,e)=>!(l!=null&&l.includes(e))]]),It=new Map([[P.IsEqual,(l,e)=>l.some(t=>t===e)],[P.IsNotEqual,(l,e)=>l.some(t=>t!==e)],[P.StartsWith,(l,e)=>l.some(t=>t==null?void 0:t.startsWith(e))],[P.EndsWith,(l,e)=>l.some(t=>t==null?void 0:t.endsWith(e))],[P.Includes,(l,e)=>l.some(t=>t==null?void 0:t.includes(e))],[P.DoesNotInclude,(l,e)=>l.some(t=>!(t!=null&&t.includes(e)))]]),Tt=new Map([[P.IsEqual,(l,e)=>l===e],[P.IsNotEqual,(l,e)=>l!==e],[P.Greater,(l,e)=>l>e],[P.GreaterOrEqual,(l,e)=>l>=e],[P.Less,(l,e)=>l<e],[P.LessOrEqual,(l,e)=>l<=e]]),Nt=new Map([[P.After,(l,e)=>l>=e],[P.Before,(l,e)=>l<=e]]),Ct=new Map([[K.Text,Et],[K.TextArray,It],[K.Number,Tt],[K.DateTime,Nt]]);let qe=class rt{constructor(e){J(this,"id");J(this,"targetValue");J(this,"config");J(this,"operatorsMap");J(this,"operators");J(this,"operator");this.id=e||Vt()}get targetDate(){const e=this.targetValue,t=e.getTimezoneOffset();return new Date(e.getTime()-t*60*1e3).toISOString().split("T")[0]}set targetDate(e){const t=this.targetTime;this.targetValue=new Date(e),this.targetTime=t}get targetTime(){const e=this.targetValue,t=e.getTimezoneOffset();return new Date(e.getTime()-t*60*1e3).toISOString().split("T")[1].split(".")[0]}set targetTime(e){const[t,s]=e.split(":").map(n=>parseInt(n));this.targetValue.setHours(t,s,0,0)}configure(e,t,s){if(this.config=e,this.operatorsMap=Ct.get(this.config.type),this.operators=Array.from(this.operatorsMap.keys()),this.operator=s||this.operators[0],this.config.type===K.DateTime)this.targetValue=t?new Date(t):new Date;else if(this.config.type===K.Number)this.targetValue=t?parseFloat(t):0;else if(this.config.type===K.Text||this.config.type===K.TextArray)this.targetValue=t||"";else throw new Error(`Not implemented type ${this.config.type}`)}filter(e){const t=e[this.config.logItemKey];return this.operatorsMap.get(this.operator)(t,this.targetValue)}static fromObjects(e){return e.map(t=>{const s=new rt(t.id),n=Z.find(i=>i.logItemKey===t.config.logItemKey);return s.configure(n,t.targetValue,t.operator),s})}};function Vt(){return Date.now()+"-"+Math.floor(Math.pow(10,12)+Math.random()*9*Math.pow(10,12)).toString(36)}function Ke(l,e,t){const s=l.slice();return s[12]=e[t],s}function je(l,e,t){const s=l.slice();return s[15]=e[t],s}function $e(l){let e,t=l[15].displayName+"",s,n;return{c(){e=y("option"),s=R(t),n=A(),this.h()},l(i){e=v(i,"OPTION",{});var o=I(e);s=z(o,t),n=O(o),o.forEach(h),this.h()},h(){e.__value=l[15],e.value=e.__value},m(i,o){S(i,e,o),d(e,s),d(e,n)},p:Y,d(i){i&&h(e)}}}function Ue(l){let e,t=Oe.get(l[12])+"",s,n,i;return{c(){e=y("option"),s=R(t),n=A(),this.h()},l(o){e=v(o,"OPTION",{});var r=I(e);s=z(r,t),n=O(r),r.forEach(h),this.h()},h(){e.__value=i=l[12],e.value=e.__value},m(o,r){S(o,e,r),d(e,s),d(e,n)},p(o,r){r&1&&t!==(t=Oe.get(o[12])+"")&&X(s,t),r&1&&i!==(i=o[12])&&(e.__value=i,e.value=e.__value)},d(o){o&&h(e)}}}function Dt(l){let e,t,s,n,i;return{c(){e=y("input"),t=A(),s=y("input"),this.h()},l(o){e=v(o,"INPUT",{type:!0,class:!0}),t=O(o),s=v(o,"INPUT",{type:!0,class:!0}),this.h()},h(){C(e,"type","date"),C(e,"class","svelte-17ir4hc"),C(s,"type","time"),C(s,"class","svelte-17ir4hc")},m(o,r){S(o,e,r),Q(e,l[0].targetDate),S(o,t,r),S(o,s,r),Q(s,l[0].targetTime),n||(i=[H(e,"input",l[9]),H(s,"input",l[10])],n=!0)},p(o,r){r&1&&Q(e,o[0].targetDate),r&1&&Q(s,o[0].targetTime)},d(o){o&&h(e),o&&h(t),o&&h(s),n=!1,oe(i)}}}function wt(l){let e,t,s;return{c(){e=y("input"),this.h()},l(n){e=v(n,"INPUT",{type:!0,class:!0}),this.h()},h(){C(e,"type","number"),C(e,"class","svelte-17ir4hc")},m(n,i){S(n,e,i),Q(e,l[0].targetValue),t||(s=H(e,"input",l[8]),t=!0)},p(n,i){i&1&&st(e.value)!==n[0].targetValue&&Q(e,n[0].targetValue)},d(n){n&&h(e),t=!1,s()}}}function Mt(l){let e,t,s;return{c(){e=y("input"),this.h()},l(n){e=v(n,"INPUT",{type:!0,class:!0}),this.h()},h(){C(e,"type","text"),C(e,"class","svelte-17ir4hc")},m(n,i){S(n,e,i),Q(e,l[0].targetValue),t||(s=H(e,"input",l[7]),t=!0)},p(n,i){i&1&&e.value!==n[0].targetValue&&Q(e,n[0].targetValue)},d(n){n&&h(e),t=!1,s()}}}function St(l){let e,t,s;return{c(){e=y("input"),this.h()},l(n){e=v(n,"INPUT",{type:!0,class:!0}),this.h()},h(){C(e,"type","text"),C(e,"class","svelte-17ir4hc")},m(n,i){S(n,e,i),Q(e,l[0].targetValue),t||(s=H(e,"input",l[6]),t=!0)},p(n,i){i&1&&e.value!==n[0].targetValue&&Q(e,n[0].targetValue)},d(n){n&&h(e),t=!1,s()}}}function At(l){let e,t,s,n,i,o,r,a,g,E,f=Z,c=[];for(let m=0;m<f.length;m+=1)c[m]=$e(je(l,f,m));let _=l[0].operators,u=[];for(let m=0;m<_.length;m+=1)u[m]=Ue(Ke(l,_,m));function V(m,w){if(m[0].config.type===K.Text)return St;if(m[0].config.type===K.TextArray)return Mt;if(m[0].config.type===K.Number)return wt;if(m[0].config.type===K.DateTime)return Dt}let N=V(l),p=N&&N(l);return{c(){e=y("div"),t=y("div"),s=R("x"),n=A(),i=y("select");for(let m=0;m<c.length;m+=1)c[m].c();o=A(),r=y("select");for(let m=0;m<u.length;m+=1)u[m].c();a=A(),p&&p.c(),this.h()},l(m){e=v(m,"DIV",{class:!0});var w=I(e);t=v(w,"DIV",{class:!0});var k=I(t);s=z(k,"x"),k.forEach(h),n=O(w),i=v(w,"SELECT",{class:!0});var j=I(i);for(let b=0;b<c.length;b+=1)c[b].l(j);j.forEach(h),o=O(w),r=v(w,"SELECT",{class:!0});var B=I(r);for(let b=0;b<u.length;b+=1)u[b].l(B);B.forEach(h),a=O(w),p&&p.l(w),w.forEach(h),this.h()},h(){C(t,"class","btn-remove svelte-17ir4hc"),C(i,"class","field-display-name svelte-17ir4hc"),l[1]===void 0&&ve(()=>l[4].call(i)),C(r,"class","svelte-17ir4hc"),l[0].operator===void 0&&ve(()=>l[5].call(r)),C(e,"class","container svelte-17ir4hc")},m(m,w){S(m,e,w),d(e,t),d(t,s),d(e,n),d(e,i);for(let k=0;k<c.length;k+=1)c[k].m(i,null);x(i,l[1]),d(e,o),d(e,r);for(let k=0;k<u.length;k+=1)u[k].m(r,null);x(r,l[0].operator),d(e,a),p&&p.m(e,null),g||(E=[H(t,"click",l[3]),H(i,"change",l[4]),H(i,"change",l[2]),H(r,"change",l[5])],g=!0)},p(m,[w]){if(w&0){f=Z;let k;for(k=0;k<f.length;k+=1){const j=je(m,f,k);c[k]?c[k].p(j,w):(c[k]=$e(j),c[k].c(),c[k].m(i,null))}for(;k<c.length;k+=1)c[k].d(1);c.length=f.length}if(w&2&&x(i,m[1]),w&1){_=m[0].operators;let k;for(k=0;k<_.length;k+=1){const j=Ke(m,_,k);u[k]?u[k].p(j,w):(u[k]=Ue(j),u[k].c(),u[k].m(r,null))}for(;k<u.length;k+=1)u[k].d(1);u.length=_.length}w&1&&x(r,m[0].operator),N===(N=V(m))&&p?p.p(m,w):(p&&p.d(1),p=N&&N(m),p&&(p.c(),p.m(e,null)))},i:Y,o:Y,d(m){m&&h(e),de(c,m),de(u,m),p&&p.d(),g=!1,oe(E)}}}function Ot(l,e,t){const s=lt();let{field:n}=e,i;Ee(async()=>{t(1,i=n.config)});function o(){n.configure(i),t(0,n)}function r(){s("remove",n)}function a(){i=ke(this),t(1,i)}function g(){n.operator=ke(this),t(0,n)}function E(){n.targetValue=this.value,t(0,n)}function f(){n.targetValue=this.value,t(0,n)}function c(){n.targetValue=st(this.value),t(0,n)}function _(){n.targetDate=this.value,t(0,n)}function u(){n.targetTime=this.value,t(0,n)}return l.$$set=V=>{"field"in V&&t(0,n=V.field)},[n,i,o,r,a,g,E,f,c,_,u]}class qt extends te{constructor(e){super(),le(this,e,Ot,At,se,{field:0})}}function Fe(l,e,t){const s=l.slice();return s[10]=e[t],s}function Be(l){let e,t,s,n;return{c(){e=y("button"),t=R("Apply"),this.h()},l(i){e=v(i,"BUTTON",{type:!0,class:!0});var o=I(e);t=z(o,"Apply"),o.forEach(h),this.h()},h(){C(e,"type","button"),C(e,"class","btn-secondary")},m(i,o){S(i,e,o),d(e,t),s||(n=H(e,"click",l[5]),s=!0)},p:Y,d(i){i&&h(e),s=!1,n()}}}function Re(l){let e,t,s,n;return{c(){e=y("button"),t=R("Reset"),this.h()},l(i){e=v(i,"BUTTON",{type:!0,class:!0});var o=I(e);t=z(o,"Reset"),o.forEach(h),this.h()},h(){C(e,"type","button"),C(e,"class","btn-secondary")},m(i,o){S(i,e,o),d(e,t),s||(n=H(e,"click",l[6]),s=!0)},p:Y,d(i){i&&h(e),s=!1,n()}}}function ze(l){let e,t=[],s=new Map,n,i=l[2];const o=r=>r[10].id;for(let r=0;r<i.length;r+=1){let a=Fe(l,i,r),g=o(a);s.set(g,t[r]=Je(g,a))}return{c(){e=y("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=v(r,"DIV",{class:!0});var a=I(e);for(let g=0;g<t.length;g+=1)t[g].l(a);a.forEach(h),this.h()},h(){C(e,"class","conditions svelte-187dxfa")},m(r,a){S(r,e,a);for(let g=0;g<t.length;g+=1)t[g].m(e,null);n=!0},p(r,a){a&20&&(i=r[2],_e(),t=ie(t,a,o,1,r,i,s,e,ht,Je,null,Fe),pe())},i(r){if(!n){for(let a=0;a<i.length;a+=1)L(t[a]);n=!0}},o(r){for(let a=0;a<t.length;a+=1)G(t[a]);n=!1},d(r){r&&h(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Je(l,e){let t,s,n;return s=new qt({props:{field:e[10]}}),s.$on("remove",e[4]),{key:l,first:null,c(){t=he(),re(s.$$.fragment),this.h()},l(i){t=he(),ae(s.$$.fragment,i),this.h()},h(){this.first=t},m(i,o){S(i,t,o),ce(s,i,o),n=!0},p(i,o){e=i;const r={};o&4&&(r.field=e[10]),s.$set(r)},i(i){n||(L(s.$$.fragment,i),n=!0)},o(i){G(s.$$.fragment,i),n=!1},d(i){i&&h(t),ue(s,i)}}}function Kt(l){let e,t,s,n,i,o,r,a,g,E,f,c,_,u=l[0]&&l[2].length>0&&Be(l),V=l[1]&&Re(l),N=l[2].length>0&&ze(l);return{c(){e=y("div"),t=y("div"),s=y("strong"),n=R("Filter Conditions:"),i=A(),o=y("button"),r=R("Add"),a=A(),u&&u.c(),g=A(),V&&V.c(),E=A(),N&&N.c(),this.h()},l(p){e=v(p,"DIV",{class:!0});var m=I(e);t=v(m,"DIV",{class:!0});var w=I(t);s=v(w,"STRONG",{});var k=I(s);n=z(k,"Filter Conditions:"),k.forEach(h),i=O(w),o=v(w,"BUTTON",{type:!0,class:!0});var j=I(o);r=z(j,"Add"),j.forEach(h),a=O(w),u&&u.l(w),g=O(w),V&&V.l(w),w.forEach(h),E=O(m),N&&N.l(m),m.forEach(h),this.h()},h(){C(o,"type","button"),C(o,"class","btn-secondary"),C(t,"class","actions svelte-187dxfa"),C(e,"class","container svelte-187dxfa")},m(p,m){S(p,e,m),d(e,t),d(t,s),d(s,n),d(t,i),d(t,o),d(o,r),d(t,a),u&&u.m(t,null),d(t,g),V&&V.m(t,null),d(e,E),N&&N.m(e,null),f=!0,c||(_=H(o,"click",l[3]),c=!0)},p(p,[m]){p[0]&&p[2].length>0?u?u.p(p,m):(u=Be(p),u.c(),u.m(t,g)):u&&(u.d(1),u=null),p[1]?V?V.p(p,m):(V=Re(p),V.c(),V.m(t,null)):V&&(V.d(1),V=null),p[2].length>0?N?(N.p(p,m),m&4&&L(N,1)):(N=ze(p),N.c(),L(N,1),N.m(e,null)):N&&(_e(),G(N,1,1,()=>{N=null}),pe())},i(p){f||(L(N),f=!0)},o(p){G(N),f=!1},d(p){p&&h(e),u&&u.d(),V&&V.d(),N&&N.d(),c=!1,_()}}}const Pe="logFilter";function jt(l,e,t){const s=lt();let{canApplyFilter:n=!1}=e,{isFilterApplied:i=!1}=e,o=[];Ee(()=>{c()});function r(){const _=Z.find(V=>!o.some(N=>N.config.logItemKey===V.logItemKey))||Z[0],u=new qe;u.configure(_),t(2,o=[...o,u]),f()}function a({detail:_}){t(2,o=o.filter(u=>u.id!==_.id)),f()}function g(){f(),s("applyFilter",o)}function E(){s("resetFilter")}function f(){const _=JSON.stringify(o);localStorage.setItem(Pe,_)}function c(){var _=localStorage.getItem(Pe);if(!_)return;const u=JSON.parse(_);t(2,o=qe.fromObjects(u))}return l.$$set=_=>{"canApplyFilter"in _&&t(0,n=_.canApplyFilter),"isFilterApplied"in _&&t(1,i=_.isFilterApplied)},[n,i,o,r,a,g,E]}class $t extends te{constructor(e){super(),le(this,e,jt,Kt,se,{canApplyFilter:0,isFilterApplied:1})}}function We(l,e,t){const s=l.slice();return s[4]=e[t],s[5]=e,s[6]=t,s}function He(l,e,t){const s=l.slice();return s[4]=e[t],s}function Le(l,e){let t,s=e[4].displayName+"",n;return{key:l,first:null,c(){t=y("th"),n=R(s),this.h()},l(i){t=v(i,"TH",{});var o=I(t);n=z(o,s),o.forEach(h),this.h()},h(){this.first=t},m(i,o){S(i,t,o),d(t,n)},p(i,o){e=i,o&1&&s!==(s=e[4].displayName+"")&&X(n,s)},d(i){i&&h(t)}}}function Ge(l,e){let t,s,n,i=e[4].displayName+"",o,r,a,g;function E(){return e[2](e[4])}function f(){e[3].call(s,e[5],e[6])}return{key:l,first:null,c(){t=y("label"),s=y("input"),n=A(),o=R(i),r=A(),this.h()},l(c){t=v(c,"LABEL",{class:!0});var _=I(t);s=v(_,"INPUT",{type:!0,class:!0}),n=O(_),o=z(_,i),r=O(_),_.forEach(h),this.h()},h(){C(s,"type","checkbox"),C(s,"class","checkbox svelte-10x9425"),C(t,"class","column-visibility-label svelte-10x9425"),this.first=t},m(c,_){S(c,t,_),d(t,s),s.checked=e[4].isVisible,d(t,n),d(t,o),d(t,r),a||(g=[H(s,"change",E),H(s,"change",f)],a=!0)},p(c,_){e=c,_&1&&(s.checked=e[4].isVisible),_&1&&i!==(i=e[4].displayName+"")&&X(o,i)},d(c){c&&h(t),a=!1,oe(g)}}}function Ut(l){let e,t,s,n,i,o,r,a=[],g=new Map,E,f,c,_,u,V,N,p=[],m=new Map,w=l[0];const k=b=>b[4].index;for(let b=0;b<w.length;b+=1){let T=He(l,w,b),M=k(T);g.set(M,a[b]=Le(M,T))}let j=l[0];const B=b=>b[4].index;for(let b=0;b<j.length;b+=1){let T=We(l,j,b),M=B(T);m.set(M,p[b]=Ge(M,T))}return{c(){e=y("div"),t=y("table"),s=y("thead"),n=y("tr"),i=y("th"),o=R(" "),r=A();for(let b=0;b<a.length;b+=1)a[b].c();E=A(),f=y("tbody"),c=y("tr"),_=A(),u=y("strong"),V=R("Columns Visibility:"),N=A();for(let b=0;b<p.length;b+=1)p[b].c();this.h()},l(b){e=v(b,"DIV",{class:!0});var T=I(e);t=v(T,"TABLE",{});var M=I(t);s=v(M,"THEAD",{});var U=I(s);n=v(U,"TR",{});var $=I(n);i=v($,"TH",{});var D=I(i);o=z(D," "),D.forEach(h),r=O($);for(let F=0;F<a.length;F+=1)a[F].l($);$.forEach(h),U.forEach(h),E=O(M),f=v(M,"TBODY",{});var q=I(f);c=v(q,"TR",{}),I(c).forEach(h),q.forEach(h),M.forEach(h),_=O(T),u=v(T,"STRONG",{});var W=I(u);V=z(W,"Columns Visibility:"),W.forEach(h),N=O(T);for(let F=0;F<p.length;F+=1)p[F].l(T);T.forEach(h),this.h()},h(){C(e,"class","container svelte-10x9425")},m(b,T){S(b,e,T),d(e,t),d(t,s),d(s,n),d(n,i),d(i,o),d(n,r);for(let M=0;M<a.length;M+=1)a[M].m(n,null);d(t,E),d(t,f),d(f,c),d(e,_),d(e,u),d(u,V),d(e,N);for(let M=0;M<p.length;M+=1)p[M].m(e,null)},p(b,[T]){T&1&&(w=b[0],a=ie(a,T,k,1,b,w,g,n,me,Le,null,He)),T&3&&(j=b[0],p=ie(p,T,B,1,b,j,m,e,me,Ge,null,We))},i:Y,o:Y,d(b){b&&h(e);for(let T=0;T<a.length;T+=1)a[T].d();for(let T=0;T<p.length;T+=1)p[T].d()}}}function Ft(l,e,t){const s=ge.instance;let n;ee.subscribe(({columns:r})=>{t(0,n=r)});const i=r=>s.toggleColumnVisibility(r);function o(r,a){r[a].isVisible=this.checked,t(0,n)}return[n,s,i,o]}class Bt extends te{constructor(e){super(),le(this,e,Ft,Ut,se,{})}}function Qe(l,e,t){const s=l.slice();return s[7]=e[t],s}function Ye(l){let e,t=l[7].name+"",s,n,i;return{c(){e=y("option"),s=R(t),n=A(),this.h()},l(o){e=v(o,"OPTION",{});var r=I(e);s=z(r,t),n=O(r),r.forEach(h),this.h()},h(){e.__value=i=l[7],e.value=e.__value},m(o,r){S(o,e,r),d(e,s),d(e,n)},p(o,r){r&1&&t!==(t=o[7].name+"")&&X(s,t),r&1&&i!==(i=o[7])&&(e.__value=i,e.value=e.__value)},d(o){o&&h(e)}}}function Xe(l){let e,t=l[3]?"Hide":"Show",s,n,i,o;return{c(){e=y("button"),s=R(t),n=R(" Filter"),this.h()},l(r){e=v(r,"BUTTON",{type:!0,class:!0});var a=I(e);s=z(a,t),n=z(a," Filter"),a.forEach(h),this.h()},h(){C(e,"type","button"),C(e,"class","btn-secondary")},m(r,a){S(r,e,a),d(e,s),d(e,n),i||(o=H(e,"click",l[14]),i=!0)},p(r,a){a&8&&t!==(t=r[3]?"Hide":"Show")&&X(s,t)},d(r){r&&h(e),i=!1,o()}}}function Ze(l){let e,t=l[4]?"Hide":"Show",s,n,i,o;return{c(){e=y("button"),s=R(t),n=R(" Columns Config"),this.h()},l(r){e=v(r,"BUTTON",{type:!0,class:!0});var a=I(e);s=z(a,t),n=z(a," Columns Config"),a.forEach(h),this.h()},h(){C(e,"type","button"),C(e,"class","btn-secondary")},m(r,a){S(r,e,a),d(e,s),d(e,n),i||(o=H(e,"click",l[11]),i=!0)},p(r,a){a&16&&t!==(t=r[4]?"Hide":"Show")&&X(s,t)},d(r){r&&h(e),i=!1,o()}}}function xe(l){let e,t;return{c(){e=y("div"),t=R(l[5]),this.h()},l(s){e=v(s,"DIV",{class:!0});var n=I(e);t=z(n,l[5]),n.forEach(h),this.h()},h(){C(e,"class","error svelte-n3m35p")},m(s,n){S(s,e,n),d(e,t)},p(s,n){n&32&&X(t,s[5])},d(s){s&&h(e)}}}function et(l){let e,t,s;return t=new $t({props:{isFilterApplied:l[2],canApplyFilter:l[6]}}),t.$on("applyFilter",l[9]),t.$on("resetFilter",l[10]),{c(){e=y("div"),re(t.$$.fragment)},l(n){e=v(n,"DIV",{});var i=I(e);ae(t.$$.fragment,i),i.forEach(h)},m(n,i){S(n,e,i),ce(t,e,null),s=!0},p(n,i){const o={};i&4&&(o.isFilterApplied=n[2]),i&64&&(o.canApplyFilter=n[6]),t.$set(o)},i(n){s||(L(t.$$.fragment,n),s=!0)},o(n){G(t.$$.fragment,n),s=!1},d(n){n&&h(e),ue(t)}}}function tt(l){let e,t,s;return t=new Bt({}),{c(){e=y("div"),re(t.$$.fragment)},l(n){e=v(n,"DIV",{});var i=I(e);ae(t.$$.fragment,i),i.forEach(h)},m(n,i){S(n,e,i),ce(t,e,null),s=!0},i(n){s||(L(t.$$.fragment,n),s=!0)},o(n){G(t.$$.fragment,n),s=!1},d(n){n&&h(e),ue(t)}}}function Rt(l){let e,t,s,n,i,o,r,a,g,E,f,c,_,u,V,N,p,m,w,k,j=l[0],B=[];for(let D=0;D<j.length;D+=1)B[D]=Ye(Qe(l,j,D));let b=l[6]&&Xe(l),T=l[6]&&Ze(l),M=l[5].length&&xe(l),U=l[3]&&et(l),$=l[4]&&tt();return p=new yt({props:{logItems:l[1]}}),{c(){e=y("div"),t=y("div"),s=y("label"),n=R("File:"),i=A(),o=y("select");for(let D=0;D<B.length;D+=1)B[D].c();r=A(),a=y("button"),g=R("Load File"),f=A(),b&&b.c(),c=A(),T&&T.c(),_=A(),M&&M.c(),u=A(),U&&U.c(),V=A(),$&&$.c(),N=A(),re(p.$$.fragment),this.h()},l(D){e=v(D,"DIV",{class:!0});var q=I(e);t=v(q,"DIV",{class:!0});var W=I(t);s=v(W,"LABEL",{for:!0});var F=I(s);n=z(F,"File:"),F.forEach(h),i=O(W),o=v(W,"SELECT",{id:!0});var ne=I(o);for(let be=0;be<B.length;be+=1)B[be].l(ne);ne.forEach(h),r=O(W),a=v(W,"BUTTON",{type:!0});var Te=I(a);g=z(Te,"Load File"),Te.forEach(h),f=O(W),b&&b.l(W),c=O(W),T&&T.l(W),W.forEach(h),_=O(q),M&&M.l(q),u=O(q),U&&U.l(q),V=O(q),$&&$.l(q),N=O(q),ae(p.$$.fragment,q),q.forEach(h),this.h()},h(){C(s,"for","fileName"),C(o,"id","fileName"),l[7]===void 0&&ve(()=>l[13].call(o)),a.disabled=E=!l[7],C(a,"type","button"),C(t,"class","controls svelte-n3m35p"),C(e,"class","tracing-ui-root svelte-n3m35p")},m(D,q){S(D,e,q),d(e,t),d(t,s),d(s,n),d(t,i),d(t,o);for(let W=0;W<B.length;W+=1)B[W].m(o,null);x(o,l[7]),d(t,r),d(t,a),d(a,g),d(t,f),b&&b.m(t,null),d(t,c),T&&T.m(t,null),d(e,_),M&&M.m(e,null),d(e,u),U&&U.m(e,null),d(e,V),$&&$.m(e,null),d(e,N),ce(p,e,null),m=!0,w||(k=[H(o,"change",l[13]),H(a,"click",l[8])],w=!0)},p(D,[q]){if(q&1){j=D[0];let F;for(F=0;F<j.length;F+=1){const ne=Qe(D,j,F);B[F]?B[F].p(ne,q):(B[F]=Ye(ne),B[F].c(),B[F].m(o,null))}for(;F<B.length;F+=1)B[F].d(1);B.length=j.length}q&129&&x(o,D[7]),(!m||q&129&&E!==(E=!D[7]))&&(a.disabled=E),D[6]?b?b.p(D,q):(b=Xe(D),b.c(),b.m(t,c)):b&&(b.d(1),b=null),D[6]?T?T.p(D,q):(T=Ze(D),T.c(),T.m(t,null)):T&&(T.d(1),T=null),D[5].length?M?M.p(D,q):(M=xe(D),M.c(),M.m(e,u)):M&&(M.d(1),M=null),D[3]?U?(U.p(D,q),q&8&&L(U,1)):(U=et(D),U.c(),L(U,1),U.m(e,V)):U&&(_e(),G(U,1,1,()=>{U=null}),pe()),D[4]?$?q&16&&L($,1):($=tt(),$.c(),L($,1),$.m(e,N)):$&&(_e(),G($,1,1,()=>{$=null}),pe());const W={};q&2&&(W.logItems=D[1]),p.$set(W)},i(D){m||(L(U),L($),L(p.$$.fragment,D),m=!0)},o(D){G(U),G($),G(p.$$.fragment,D),m=!1},d(D){D&&h(e),de(B,D),b&&b.d(),T&&T.d(),M&&M.d(),U&&U.d(),$&&$.d(),ue(p),w=!1,oe(k)}}}const at="api/trace-files";async function zt(){const e=await(await fetch(at)).text();return JSON.parse(e)}function Jt(l,e,t){let s,n=[],i,o=[],r=[],a=!1,g=!1,E=!1,f="";Ee(async()=>{t(0,n=await zt())}),ee.subscribe(({isEditMode:m})=>{t(4,E=m)});async function c(){t(12,o=[]),t(5,f="");const m=`${at}/${encodeURIComponent(i.name)}`,k=await(await fetch(m)).text();try{t(12,o=k.split(`
`).filter(Boolean).map(Ie.fromJson))}catch{t(7,i=void 0),t(3,g=!1),t(4,E=!1),t(5,f="Failed to parse JSON in log file. It could be a text log file. Pick a JSON log file.")}u()}function _({detail:m}){t(2,a=!0),t(1,r=o.filter(w=>m.every(k=>k.filter(w))))}function u(){t(2,a=!1),t(1,r=o.slice())}function V(){ee.update(m=>({...m,isEditMode:!m.isEditMode}))}function N(){i=ke(this),t(7,i),t(0,n)}const p=()=>t(3,g=!g);return l.$$.update=()=>{l.$$.dirty&4096&&t(6,s=o.length>0)},[n,r,a,g,E,f,s,i,c,_,u,V,o,N,p]}class Pt extends te{constructor(e){super(),le(this,e,Jt,Rt,se,{})}}function Wt(l){let e,t,s;return t=new Pt({}),{c(){e=y("section"),re(t.$$.fragment)},l(n){e=v(n,"SECTION",{});var i=I(e);ae(t.$$.fragment,i),i.forEach(h)},m(n,i){S(n,e,i),ce(t,e,null),s=!0},p:Y,i(n){s||(L(t.$$.fragment,n),s=!0)},o(n){G(t.$$.fragment,n),s=!1},d(n){n&&h(e),ue(t)}}}class Qt extends te{constructor(e){super(),le(this,e,null,Wt,se,{})}}export{Qt as default};
